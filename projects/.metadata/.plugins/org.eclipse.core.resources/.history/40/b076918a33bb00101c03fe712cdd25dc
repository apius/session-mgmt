package org.apius.server.identity.session.server.openam;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;

import org.apius.messaging.atom.AtomMessageBuilder;
import org.restlet.ext.atom.Entry;
import org.restlet.ext.atom.Link;
import org.restlet.ext.atom.Relation;
import org.restlet.ext.xml.SaxRepresentation;
import org.restlet.representation.Representation;

final class ResponseBuilder {

    private AtomMessageBuilder atomMessageBuilder;
    
    ResponseBuilder(AtomMessageBuilder atomMessageBuilder) {
        this.atomMessageBuilder = atomMessageBuilder;
    }
    
    SaxRepresentation writeCreateSessionXml(String token) throws IOException {
        Entry entry = atomMessageBuilder.createEntry();
        Link link = 
            atomMessageBuilder.createLink("openam-session-attributes", "/identity/session/attributes", Relation.RELATED);
        entry.setTitle(atomMessageBuilder.createText("openam-session"));
        entry.setId(token);
        entry.getLinks().add(link);
        
        return entry;
    }
    
    SaxRepresentation writeSessionAttributesXml(HashMap<String, List<String>> attributesMapping) { 
        return representation;
    }
}
